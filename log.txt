
> rbxts-xstate-monorepo@ test D:\Github\Roblox\Packages\rbxts-xstate
> sh scripts/shell/test-local.sh default.project.json test/src/test/spec.server.luau

Building project 'test'
Built project to test-place.rbxl
DiscoverGameIcons batch load failed, loading thumbnails individually
CoreGui {Archivable = true, Capabilities = 0, Children = Instances(size=15) [RobloxGui {AbsolutePosition = 0, 0, AbsoluteRotation = 0, AbsoluteSize = 1516, 820, Archivable = true, AutoLocalize = true, Capabilities = 0, Children = Instances(size=1) [ControlFrame {AbsolutePosition = 0, 0, AbsoluteRotation = 0, AbsoluteSize = 1516, 820, Active = false, AnchorPoint = 0, 0, Archivable = true, AutoLocalize = true, AutomaticSize = 0, BackgroundColor3 = 0.639216, 0.635294, 0.647059, BackgroundTransparency = 1, BorderColor3 = 0.105882, 0.164706, 0.207843, BorderMode = 0, BorderSizePixel = 1, Capabilities = 0, Children = Instances, ClassName = Frame, ClipsDescendants = false, Draggable = false, GuiState = 0, Interactable = true, LayoutOrder = 0, Name = ControlFrame, NextSelectionDown = nil, NextSelectionLeft = nil, NextSelectionRight = nil, NextSelectionUp = nil, Parent = RobloxGui, Position = {0, 0}, {0, 0}, RootLocalizationTable = nil, Rotation = 0, Sandboxed = false, Selectable = false, SelectionBehaviorDown = 0, SelectionBehaviorLeft = 0, SelectionBehaviorRight = 0, SelectionBehaviorUp = 0, SelectionGroup = false, SelectionImageObject = nil, SelectionOrder = 0, Size = {1, 0}, {1, 0}, SizeConstraint = 0, Style = 0, Visible = true, ZIndex = 1, className = Frame}], ClassName = ScreenGui, ClipToDeviceSafeArea = true, DisplayOrder = 0, Enabled = true, IgnoreGuiInset = false, Name = RobloxGui, Parent = CoreGui {Archivable = true, Capabilities = 0, Children = Instances(size=15) [RobloxGui, LightGuides, ImageLoader, DraggerUI, ViewSelectorScreenGui, TransformTempAdornments, RigEditUI, SelectPrompt, JointHandles, JointHandles, JointAdornment, JointAdornment, MoonAnimator2Gui, KojoGizmos, PathEditFolder], ClassName = CoreGui, Name = CoreGui, Parent = run-in-roblox-place.rbxl {Archivable = true, Capabilities = 0, Children = Instances, ClassName = DataModel, CreatorId = 0, CreatorType = 0, GameId = 0, GearGenreSetting = 0, Genre = 0, JobId = , MatchmakingType = 1, Name = run-in-roblox-place.rbxl, Parent = nil, PlaceId = 0, PlaceVersion = 0, PrivateServerId = , PrivateServerOwnerId = 0, Sandboxed = false, Workspace = Workspace, className = DataModel, lighting = Lighting, workspace = Workspace}, Sandboxed = false, Version = 0, className = CoreGui}, ... }, ... ], ... }
string label some string
expr label expr 42
DiscoverGameIcons batch load failed, loading thumbnails individually
DiscoverGameIcons experienced an error: sabuiltin_StartPage.rbxm.StartPage.Src.Network.GameCache:20: Item has no Id or FilePath or ContentId
DiscoverGameIcons batch load failed, loading thumbnails individually
DiscoverGameIcons experienced an error: sabuiltin_StartPage.rbxm.StartPage.Src.Network.GameCache:20: Item has no Id or FilePath or ContentId
Event "PING" was sent to stopped actor "myChild (x:113)". This actor has already reached its final state, and will not transition.
Event: {"type":"PING"}
Event "PING" was sent to stopped actor "myChild (x:116)". This actor has already reached its final state, and will not transition.
Event: {"type":"PING"}
 FAIL   xstate-core  xstate-core/actions.spec 
  ● entry/exit actions › parallel states › should reenter parallel region when a parallel state gets reentered while targeting another region

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 2
    + Received  + 2
    
      Table {

      +   "exit: ready.devicesInfo",
          "exit: ready.camera.on",
          "exit: ready.camera",
      -   "exit: ready.devicesInfo",
          "exit: ready",
          "enter: ready",
      -   "enter: ready.devicesInfo",
          "enter: ready.camera",
          "enter: ready.camera.off",
      +   "enter: ready.devicesInfo",
        }
      ReplicatedStorage.TS.shared.xstate-core.actions.spec:1159
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● entry/exit actions › parallel states › should reenter parallel region when a parallel state is reentered while targeting another region

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 2
    + Received  + 2
    
      Table {

      +   "exit: ready.devicesInfo",
          "exit: ready.camera.on",
          "exit: ready.camera",
      -   "exit: ready.devicesInfo",
          "exit: ready",
          "enter: ready",
      -   "enter: ready.devicesInfo",
          "enter: ready.camera",
          "enter: ready.camera.off",
      +   "enter: ready.devicesInfo",
        }
      ReplicatedStorage.TS.shared.xstate-core.actions.spec:1194
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● forwardTo() › should not cause an infinite loop when forwarding to undefined

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  -  1
    + Received  + 49
    
      Table {
        Table {
          Table {

      -       "Error: Attempted to forward event to undefined actor. This risks an infinite loop in the sender.",
      +       "__stack": "ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.actions.send:161
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.actions.send:29 function resolveSendTo
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveAndExecuteActionsWithContext:46 function resolveAndExecuteActionsWithContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveActionsAndContext:6 function resolveActionsAndContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.microstep:31 function microstep
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.macrostep:70 function macrostep
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:201 function transition
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:491
      + ReplicatedStorage.TS.include.RuntimeLib:195 function try
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:490 function _process
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:53 function flush
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:45 function enqueue
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:623 function _send
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createSystem:163
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:634 function send
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.shared.xstate-core.actions.spec:2309
      + ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299
      + ",
      +       "message": "Attempted to forward event to undefined actor. This risks an infinite loop in the sender.",
      +       "name": "Error",
      +       "stack": "Error: Attempted to forward event to undefined actor. This risks an infinite loop in the sender.
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.actions.send:161
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.actions.send:29 function resolveSendTo
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveAndExecuteActionsWithContext:46 function resolveAndExecuteActionsWithContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveActionsAndContext:6 function resolveActionsAndContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.microstep:31 function microstep
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.macrostep:70 function macrostep
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:201 function transition
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:491
      + ReplicatedStorage.TS.include.RuntimeLib:195 function try
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:490 function _process
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:53 function flush
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:45 function enqueue
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:623 function _send
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createSystem:163
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:634 function send
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.shared.xstate-core.actions.spec:2309
      + ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299
      + ",
            },
          },
        }
      ReplicatedStorage.TS.shared.xstate-core.actions.spec:2312
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● sendTo › should error if given a string

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  -  1
    + Received  + 39
    
      Table {
        Table {
          Table {

      -       "Error: Only event objects may be used with sendTo; use sendTo({ type: \"a string\" }) instead",
      +       "__stack": "ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.actions.send:19 function resolveSendTo
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveAndExecuteActionsWithContext:46 function resolveAndExecuteActionsWithContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveActionsAndContext:6 function resolveActionsAndContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.enterStates:71 function enterStates
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.microstep:35 function microstep
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:248 function getInitialSnapshot
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:245
      + ReplicatedStorage.TS.include.RuntimeLib:195 function try
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:234 function _initState
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:224 function constructor
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:67 function new
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:696 function createActor
      + ReplicatedStorage.TS.shared.xstate-core.actions.spec:2871
      + ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299
      + ",
      +       "message": "Only event objects may be used with sendTo; use sendTo({ type: \"a string\" }) instead",
      +       "name": "Error",
      +       "stack": "Error: Only event objects may be used with sendTo; use sendTo({ type: \"a string\" }) instead
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.actions.send:19 function resolveSendTo
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveAndExecuteActionsWithContext:46 function resolveAndExecuteActionsWithContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveActionsAndContext:6 function resolveActionsAndContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.enterStates:71 function enterStates
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.microstep:35 function microstep
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:248 function getInitialSnapshot
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:245
      + ReplicatedStorage.TS.include.RuntimeLib:195 function try
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:234 function _initState
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:224 function constructor
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:67 function new
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:696 function createActor
      + ReplicatedStorage.TS.shared.xstate-core.actions.spec:2871
      + ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299
      + ",
            },
          },
        }
      ReplicatedStorage.TS.shared.xstate-core.actions.spec:2876
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● sendTo › should not attempt to deliver a delayed event to the spawned actor's ID that was stopped since the event was scheduled

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 2
    + Received  + 2
    
      Table {
        Table {

      -     ""PING\" was sent to stopped actor \"myChild (x:113)\". This actor has already reached its final state, and will not transition.
      - Event: {\"type\":\"PING\"}\",",
      +     "Event " was sent to stopped actor \"myChild (x:113)\". This actor has already reached its final state, and will not transition.
      + Event: {\"type\":\"PING\"}",
          },
        }
      ReplicatedStorage.TS.shared.xstate-core.actions.spec:2974
      ReplicatedStorage.TS.include.RuntimeLib:148

  ● sendTo › should not attempt to deliver a delayed event to the invoked actor's ID that was stopped since the event was scheduled

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 2
    + Received  + 2
    
      Table {
        Table {

      -     ""PING\" was sent to stopped actor \"myChild (x:116)\". This actor has already reached its final state, and will not transition.
      - Event: {\"type\":\"PING\"}\"",
      +     "Event " was sent to stopped actor \"myChild (x:116)\". This actor has already reached its final state, and will not transition.
      + Event: {\"type\":\"PING\"}",
          },
        }
      ReplicatedStorage.TS.shared.xstate-core.actions.spec:3039
      ReplicatedStorage.TS.include.RuntimeLib:148

  ● raise › should error if given a string

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  -  1
    + Received  + 39
    
      Table {
        Table {
          Table {

      -       "Error: Only event objects may be used with raise; use raise({ type: \"a string\" }) instead",
      +       "__stack": "ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.actions.raise:14 function resolveRaise
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveAndExecuteActionsWithContext:46 function resolveAndExecuteActionsWithContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveActionsAndContext:6 function resolveActionsAndContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.enterStates:71 function enterStates
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.microstep:35 function microstep
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:248 function getInitialSnapshot
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:245
      + ReplicatedStorage.TS.include.RuntimeLib:195 function try
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:234 function _initState
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:224 function constructor
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:67 function new
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:696 function createActor
      + ReplicatedStorage.TS.shared.xstate-core.actions.spec:3213
      + ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299
      + ",
      +       "message": "Only event objects may be used with raise; use raise({ type: \"a string\" }) instead",
      +       "name": "Error",
      +       "stack": "Error: Only event objects may be used with raise; use raise({ type: \"a string\" }) instead
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.actions.raise:14 function resolveRaise
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveAndExecuteActionsWithContext:46 function resolveAndExecuteActionsWithContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveActionsAndContext:6 function resolveActionsAndContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.enterStates:71 function enterStates
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.microstep:35 function microstep
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:248 function getInitialSnapshot
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:245
      + ReplicatedStorage.TS.include.RuntimeLib:195 function try
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:234 function _initState
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:224 function constructor
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:67 function new
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:696 function createActor
      + ReplicatedStorage.TS.shared.xstate-core.actions.spec:3213
      + ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299
      + ",
            },
          },
        }
      ReplicatedStorage.TS.shared.xstate-core.actions.spec:3218
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● actions › should call transition actions in document order for same-level parallel regions

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 1
    + Received  + 1
    
      Table {
    -   "a",
        "b",
    +   "a",
      }

      ReplicatedStorage.TS.shared.xstate-core.actions.spec:3730
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● actions › should call transition actions in document order for states at different levels of parallel regions

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 1
    + Received  + 1
    
      Table {
    -   "a1",
        "b",
    +   "a1",
      }

      ReplicatedStorage.TS.shared.xstate-core.actions.spec:3768
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● actions › should warn if called in custom action

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 14
    + Received  +  1
    
    - Table {
    -   Table {

      -     "Custom actions should not call `assign()` directly, as it is not imperative. See https://stately.ai/docs/actions#built-in-actions for more details.",
      -   },
      -   Table {
      -     "Custom actions should not call `raise()` directly, as it is not imperative. See https://stately.ai/docs/actions#built-in-actions for more details.",
      -   },
      -   Table {
      -     "Custom actions should not call `sendTo()` directly, as it is not imperative. See https://stately.ai/docs/actions#built-in-actions for more details.",
      -   },
      -   Table {
      -     "Custom actions should not call `emit()` directly, as it is not imperative. See https://stately.ai/docs/actions#built-in-actions for more details.",
      -   },
      - }
      + Table {}
      ReplicatedStorage.TS.shared.xstate-core.actions.spec:4004
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

 PASS   xstate-core  xstate-core/activities.spec 
 PASS   xstate-core  xstate-core/actor.spec 
The 'callback' argument must be a function or an object that has 'handleEvent' method: %o
The 'callback' argument must be a function or an object that has 'handleEvent' method: %o
The 'callback' argument must be a function or an object that has 'handleEvent' method: %o
The 'callback' argument must be a function or an object that has 'handleEvent' method: %o
The 'callback' argument must be a function or an object that has 'handleEvent' method: %o
The 'callback' argument must be a function or an object that has 'handleEvent' method: %o
The 'callback' argument must be a function or an object that has 'handleEvent' method: %o
The 'callback' argument must be a function or an object that has 'handleEvent' method: %o
The 'callback' argument must be a function or an object that has 'handleEvent' method: %o
 PASS   xstate-core  xstate-core/actorLogic.spec 
 PASS   xstate-core  xstate-core/after.spec 
 PASS   xstate-core  xstate-core/assert.spec 
 PASS   xstate-core  xstate-core/assign.spec 
 PASS   xstate-core  xstate-core/clock.spec 
 PASS   xstate-core  xstate-core/deep.spec 
 PASS   xstate-core  xstate-core/definition.spec 
 PASS   xstate-core  xstate-core/deterministic.spec 
 PASS   xstate-core  xstate-core/emit.spec 
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src:285: ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src:644: Error: no_infinite_loop_when_error_is_thrown_in_subscribe

ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError:18 function reportUnhandledError
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:301
ReplicatedStorage.TS.include.RuntimeLib:209 function try
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:295 function update
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:515 function _process
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:53 function flush
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:45 function enqueue
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:623 function _send
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createSystem:163
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:634 function send
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
ReplicatedStorage.TS.shared.xstate-core.errors.spec:119
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:353
ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

Stack Begin
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src', Line 285
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src', Line 2045
Script 'ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError', Line 27
Script 'ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl', Line 26
Stack End
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src:285: ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src:644: Error: doesnt_crash_actor_when_error_is_thrown_in_subscribe

ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError:18 function reportUnhandledError
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:301
ReplicatedStorage.TS.include.RuntimeLib:209 function try
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:295 function update
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:515 function _process
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:53 function flush
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:45 function enqueue
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:623 function _send
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createSystem:163
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:634 function send
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
ReplicatedStorage.TS.shared.xstate-core.errors.spec:163
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:353
ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

Stack Begin
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src', Line 285
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src', Line 2045
Script 'ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError', Line 27
Script 'ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl', Line 26
Stack End
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src:285: ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src:644: Error: doesnt_notify_error_listener_when_error_is_thrown_in_subscribe

ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError:18 function reportUnhandledError
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:301
ReplicatedStorage.TS.include.RuntimeLib:209 function try
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:295 function update
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:515 function _process
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:53 function flush
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:45 function enqueue
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:623 function _send
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createSystem:163
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:634 function send
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
ReplicatedStorage.TS.shared.xstate-core.errors.spec:199
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:353
ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

Stack Begin
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src', Line 285
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src', Line 2045
Script 'ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError', Line 27
Script 'ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl', Line 26
Stack End
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src:285: ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src:644: Error: unhandled_sync_error_in_actor_start

ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError:18 function reportUnhandledError
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:563 function _reportError
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:591 function _error
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:332 function update
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:515 function _process
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:53 function flush
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:22 function start
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:484 function start
ReplicatedStorage.TS.shared.xstate-core.errors.spec:227
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:353
ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

Stack Begin
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src', Line 285
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src', Line 2045
Script 'ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError', Line 27
Script 'ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl', Line 26
Stack End
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src:285: ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src:644: Error: unhandled_rejection_in_promise_actor_without_error_listener

ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError:18 function reportUnhandledError
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:563 function _reportError
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:591 function _error
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:332 function update
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:515 function _process
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:53 function flush
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:22 function start
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:484 function start
ReplicatedStorage.TS.shared.xstate-core.errors.spec:251
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:353
ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

Stack Begin
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src', Line 285
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src', Line 2045
Script 'ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError', Line 27
Script 'ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl', Line 26
Stack End
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src:285: ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src:644: Error: handled_sync_error_in_actor_start

ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError:18 function reportUnhandledError
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:586 function _reportError
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:591 function _error
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:470
ReplicatedStorage.TS.include.RuntimeLib:209 function try
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:456 function start
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:258
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:262 function start
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:457
ReplicatedStorage.TS.include.RuntimeLib:195 function try
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:456 function start
ReplicatedStorage.TS.shared.xstate-core.errors.spec:386
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:353
ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

Stack Begin
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src', Line 285
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src', Line 2045
Script 'ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError', Line 27
Script 'ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl', Line 26
Stack End
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src:285: ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src:644: Error: handled_sync_error_in_actor_start

ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError:18 function reportUnhandledError
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:586 function _reportError
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:591 function _error
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:470
ReplicatedStorage.TS.include.RuntimeLib:209 function try
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:456 function start
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:258
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:262 function start
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:457
ReplicatedStorage.TS.include.RuntimeLib:195 function try
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:456 function start
ReplicatedStorage.TS.shared.xstate-core.errors.spec:457
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:353
ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

Stack Begin
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src', Line 285
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src', Line 2045
Script 'ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError', Line 27
Script 'ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl', Line 26
Stack End
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src:285: ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src:644: Error: handled_sync_error_in_actor_start

ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError:18 function reportUnhandledError
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:563 function _reportError
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:591 function _error
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:332 function update
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:515 function _process
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:53 function flush
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:22 function start
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:484 function start
ReplicatedStorage.TS.shared.xstate-core.errors.spec:457
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:353
ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

Stack Begin
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src', Line 285
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src', Line 2045
Script 'ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError', Line 27
Script 'ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl', Line 26
Stack End
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src:285: ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src:644: Error: unhandled_sync_error_in_actor_start

ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError:18 function reportUnhandledError
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:563 function _reportError
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:591 function _error
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:332 function update
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:515 function _process
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:53 function flush
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:22 function start
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:484 function start
ReplicatedStorage.TS.shared.xstate-core.errors.spec:598
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:353
ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

Stack Begin
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src', Line 285
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src', Line 2045
Script 'ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError', Line 27
Script 'ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl', Line 26
Stack End
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src:285: ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src:644: Error: error_thrown_by_error_listener

ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError:18 function reportUnhandledError
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:581
ReplicatedStorage.TS.include.RuntimeLib:209 function try
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:575 function _reportError
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:591 function _error
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:332 function update
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:515 function _process
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:53 function flush
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:22 function start
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:484 function start
ReplicatedStorage.TS.shared.xstate-core.errors.spec:625
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:353
ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

Stack Begin
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src', Line 285
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src', Line 2045
Script 'ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError', Line 27
Script 'ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl', Line 26
Stack End
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src:285: ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src:644: Error: error_thrown_when_not_every_observer_comes_with_an_error_listener

ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError:18 function reportUnhandledError
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:586 function _reportError
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:591 function _error
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:332 function update
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:515 function _process
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:53 function flush
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:22 function start
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:484 function start
ReplicatedStorage.TS.shared.xstate-core.errors.spec:650
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:353
ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

Stack Begin
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src', Line 285
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src', Line 2045
Script 'ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError', Line 27
Script 'ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl', Line 26
Stack End
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src:285: ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src:644: Error: error_thrown_by_error_listener

ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError:18 function reportUnhandledError
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:581
ReplicatedStorage.TS.include.RuntimeLib:209 function try
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:575 function _reportError
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:591 function _error
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:332 function update
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:515 function _process
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:53 function flush
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:22 function start
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:484 function start
ReplicatedStorage.TS.shared.xstate-core.errors.spec:690
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:353
ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

Stack Begin
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src', Line 285
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src', Line 2045
Script 'ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError', Line 27
Script 'ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl', Line 26
Stack End
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src:285: ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src:644: Error: error_thrown_when_not_every_observer_comes_with_an_error_listener

ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError:18 function reportUnhandledError
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:586 function _reportError
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:591 function _error
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:332 function update
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:515 function _process
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:53 function flush
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:22 function start
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:484 function start
ReplicatedStorage.TS.shared.xstate-core.errors.spec:690
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:353
ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

Stack Begin
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src', Line 285
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src', Line 2045
Script 'ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError', Line 27
Script 'ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl', Line 26
Stack End
 PASS   xstate-core  xstate-core/errors.spec 
 PASS   xstate-core  xstate-core/event.spec 
Wildcards can only be the last token of an event descriptor (e.g., "event.*") or the entire event descriptor ("*"). Check the "event.*.bar.*" event.
Wildcards can only be the last token of an event descriptor (e.g., "event.*") or the entire event descriptor ("*"). Check the "*.event.*" event.
Infix wildcards in transition events are not allowed. Check the "*.event.*" transition.
Wildcards can only be the last token of an event descriptor (e.g., "event.*") or the entire event descriptor ("*"). Check the "*event.*" event.
Wildcards can only be the last token of an event descriptor (e.g., "event.*") or the entire event descriptor ("*"). Check the "event*.bar.*" event.
 PASS   xstate-core  xstate-core/eventDescriptors.spec 
 FAIL   xstate-core  xstate-core/examples/6.16.spec 
  ● Example 6.16 › should go from {"A":"D","B":"F"} to {"A":"C","B":"F"} on 1, 5, 3

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 1
    + Received  + 1
    
      Table {

      -   "A": "C",
      +   "A": "D",
          "B": "F",
        }
      ReplicatedStorage.TS.shared.xstate-core.utils:66
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

 FAIL   xstate-core  xstate-core/examples/6.17.spec 
  ● Example 6.17 › should go from X to {"Y":{"A":"C","B":"G"}} on 2, back, 4

    expect(received).toEqual(expected) -- deep equality

      Expected: {"Y": {"A": "C", "B": "G"}}
      Received: "X"
      ReplicatedStorage.TS.shared.xstate-core.examples.6.17.spec:91
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

 PASS   xstate-core  xstate-core/examples/6.6.spec 
 PASS   xstate-core  xstate-core/examples/6.8.spec 
 FAIL   xstate-core  xstate-core/examples/6.9.spec 
  ● Example 6.9 › should go from {"A":"C"} to {"A":{"B":"E"}} on 4, 6, 1

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 1
    + Received  + 1
    
      Table {

          "A": Table {
      -     "B": "E",
      +     "C": "G",
          },
        }
      ReplicatedStorage.TS.shared.xstate-core.utils:66
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● Example 6.9 › should go from {"A":"B"} to {"A":{"C":"G"}} on 5, 6, 1

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 1
    + Received  + 1
    
      Table {

          "A": Table {
      -     "C": "G",
      +     "B": "E",
          },
        }
      ReplicatedStorage.TS.shared.xstate-core.utils:66
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

 PASS   xstate-core  xstate-core/examples/cd.spec 
 PASS   xstate-core  xstate-core/final.spec 
 PASS   xstate-core  xstate-core/getNextSnapshot.spec 
 PASS   xstate-core  xstate-core/guards.spec 
 PASS   xstate-core  xstate-core/history.spec 
 FAIL   xstate-core  xstate-core/id.spec 
  ● State node IDs › should go from {"B":"foo"} to {"A":"foo"} on NEXT,NEXT

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 1
    + Received  + 1
    
      Table {

      -   "A": "foo",
      +   "B": "foo",
        }
      ReplicatedStorage.TS.shared.xstate-core.utils:66
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● State node IDs › should work with keys that have escaped periods

    Invalid transition definition for state node '(machine).start':

      Error: Child state 'foo..bar' does not exist on '(machine)'
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveTarget:37
      ReplicatedStorage.TS.include.RuntimeLib:209 function try
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveTarget:33
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveTarget:47 function resolveTarget
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.formatTransition:15 function formatTransition
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.formatTransitions:19
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.formatTransitions:22 function formatTransitions
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateNode:121 function _initialize
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateNode:139
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateNode:142 function _initialize
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:106 function constructor
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:42 function new
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createMachine:49 function createMachine
      ReplicatedStorage.TS.shared.xstate-core.id.spec:127
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● State node IDs › should work with IDs that have escaped periods

    Child state node '#foo..bar' does not exist on machine '(machine)'

      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:272 function getStateNodeById
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveTarget:23
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveTarget:47 function resolveTarget
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.formatTransition:15 function formatTransition
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.formatTransitions:19
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.formatTransitions:22 function formatTransitions
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateNode:121 function _initialize
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateNode:139
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateNode:142 function _initialize
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:106 function constructor
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:42 function new
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createMachine:49 function createMachine
      ReplicatedStorage.TS.shared.xstate-core.id.spec:158
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● State node IDs › should not treat escaped backslash as period's escape

    Child state node '#some\\' does not exist on machine '(machine)'

      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:272 function getStateNodeById
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveTarget:23
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveTarget:47 function resolveTarget
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.formatTransition:15 function formatTransition
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.formatTransitions:19
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.formatTransitions:22 function formatTransitions
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateNode:121 function _initialize
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateNode:139
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateNode:142 function _initialize
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:106 function constructor
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:42 function new
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createMachine:49 function createMachine
      ReplicatedStorage.TS.shared.xstate-core.id.spec:192
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

 PASS   xstate-core  xstate-core/initial.spec 
{["__stack"] = ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src:2043
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError:27
ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl:26
, ["message"] = Code should not be running when globalEnv is uninitialised, ["name"] = Error, ["stack"] = Error: Code should not be running when globalEnv is uninitialised
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src:2043
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError:27
ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl:26
}
Stack Begin
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src', Line 2043
Script 'ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError', Line 27
Script 'ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl', Line 26
Stack End
 PASS   xstate-core  xstate-core/input.spec 
 FAIL   xstate-core  xstate-core/inspect.spec 
  ● inspect › can inspect communications between actors

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 50
    + Received  + 50
    
    @@ -70,50 +70,28 @@

            "sourceId": "x:2",
            "targetId": "x:3",
            "type": "@xstate.event",
          },
          Table {
      -     "actorId": "x:3",
            "event": Table {
      -       "type": "xstate.init",
      +       "data": 42,
      +       "type": "xstate.promise.resolve",
            },
      -     "snapshot": Table {
      -       "status": "active",
      -     },
      -     "status": "active",
      -     "type": "@xstate.snapshot",
      +     "sourceId": "x:3",
      +     "targetId": "x:3",
      +     "type": "@xstate.event",
          },
          Table {
      -     "actorId": "x:2",
      +     "actorId": "x:3",
            "event": Table {
      -       "type": "loadChild",
      +       "type": "xstate.init",
            },
            "snapshot": Table {
      -       "value": "loading",
      -     },
              "status": "active",
      -     "type": "@xstate.snapshot",
      -   },
      -   Table {
      -     "actorId": "x:1",
      -     "event": Table {
      -       "type": "load",
      -     },
      -     "snapshot": Table {
      -       "value": "waiting",
            },
            "status": "active",
            "type": "@xstate.snapshot",
      -   },
      -   Table {
      -     "event": Table {
      -       "data": 42,
      -       "type": "xstate.promise.resolve",
      -     },
      -     "sourceId": "x:3",
      -     "targetId": "x:3",
      -     "type": "@xstate.event",
          },
          Table {
            "event": Table {
              "actorId": "0.(machine).loading",
              "output": 42,
      @@ -122,48 +100,49 @@
            "sourceId": "x:3",
            "targetId": "x:2",
            "type": "@xstate.event",
          },
          Table {
      +     "actorId": "x:3",
            "event": Table {
      -       "type": "toParent",
      +       "data": 42,
      +       "type": "xstate.promise.resolve",
      +     },
      +     "snapshot": Table {
      +       "output": 42,
      +       "status": "done",
            },
      -     "sourceId": "x:2",
      -     "targetId": "x:1",
      -     "type": "@xstate.event",
      +     "status": "done",
      +     "type": "@xstate.snapshot",
          },
          Table {
      -     "actorId": "x:1",
      +     "actorId": "x:2",
            "event": Table {
      -       "type": "toParent",
      +       "type": "loadChild",
            },
            "snapshot": Table {
      -       "value": "waiting",
      +       "value": "loading",
            },
            "status": "active",
            "type": "@xstate.snapshot",
          },
          Table {
            "event": Table {
      -       "actorId": "child",
      -       "type": "xstate.done.actor.child",
      +       "type": "toParent",
            },
            "sourceId": "x:2",
            "targetId": "x:1",
            "type": "@xstate.event",
          },
          Table {
      -     "actorId": "x:1",
            "event": Table {
              "actorId": "child",
              "type": "xstate.done.actor.child",
            },
      -     "snapshot": Table {
      -       "value": "success",
      -     },
      -     "status": "active",
      -     "type": "@xstate.snapshot",
      +     "sourceId": "x:2",
      +     "targetId": "x:1",
      +     "type": "@xstate.event",
          },
          Table {
            "actorId": "x:2",
            "event": Table {
              "actorId": "0.(machine).loading",
      @@ -175,18 +154,39 @@
            },
            "status": "done",
            "type": "@xstate.snapshot",
          },
          Table {
      -     "actorId": "x:3",
      +     "actorId": "x:1",
      +     "event": Table {
      +       "type": "load",
      +     },
      +     "snapshot": Table {
      +       "value": "waiting",
      +     },
      +     "status": "active",
      +     "type": "@xstate.snapshot",
      +   },
      +   Table {
      +     "actorId": "x:1",
            "event": Table {
      -       "data": 42,
      -       "type": "xstate.promise.resolve",
      +       "type": "toParent",
            },
            "snapshot": Table {
      -       "output": 42,
      -       "status": "done",
      +       "value": "waiting",
            },
      -     "status": "done",
      +     "status": "active",
      +     "type": "@xstate.snapshot",
      +   },
      +   Table {
      +     "actorId": "x:1",
      +     "event": Table {
      +       "actorId": "child",
      +       "type": "xstate.done.actor.child",
      +     },
      +     "snapshot": Table {
      +       "value": "success",
      +     },
      +     "status": "active",
            "type": "@xstate.snapshot",
          },
        }
      ReplicatedStorage.TS.shared.xstate-core.inspect.spec:287
      ReplicatedStorage.TS.include.RuntimeLib:148

 PASS   xstate-core  xstate-core/internalTransitions.spec 
Event "TIMER" was sent to stopped actor "x:27 (x:27)". This actor has already reached its final state, and will not transition.
Event: {"type":"TIMER"}
{["__stack"] = ReplicatedStorage.TS.shared.xstate-core.interpreter.spec:1140
ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl:26
, ["matcherResult"] = {["actual"] = {{Event "TRIGGER" was sent to stopped actor "x:43 (x:43)". This actor has already reached its final state, and will not transition.
Event: {"type":"TRIGGER"}}}, ["expected"] = {{Event "TRIGGER" was sent to stopped actor "x:43 (x:43)". This actor has already reached its final state, and will not transition.
          Event: {"type":"TRIGGER"}}}, ["message"] = expect(received).toEqual(expected) -- deep equality

- Expected  - 1
+ Received  + 1

  Table {
    Table {
      "Event " was sent to stopped actor \"x:43 (x:43)\". This actor has already reached its final state, and will not transition.
-           Event: {\"type\":\"TRIGGER\"}",
+ Event: {\"type\":\"TRIGGER\"}",
    },
  }, ["name"] = toEqual, ["pass"] = false}, ["message"] = expect(received).toEqual(expected) -- deep equality

- Expected  - 1
+ Received  + 1

  Table {
    Table {
      "Event " was sent to stopped actor \"x:43 (x:43)\". This actor has already reached its final state, and will not transition.
-           Event: {\"type\":\"TRIGGER\"}",
+ Event: {\"type\":\"TRIGGER\"}",
    },
  }, ["name"] = Error, ["stack"] = Error: expect(received).toEqual(expected) -- deep equality

- Expected  - 1
+ Received  + 1

  Table {
    Table {
      "Event " was sent to stopped actor \"x:43 (x:43)\". This actor has already reached its final state, and will not transition.
-           Event: {\"type\":\"TRIGGER\"}",
+ Event: {\"type\":\"TRIGGER\"}",
    },
  }
ReplicatedStorage.TS.shared.xstate-core.interpreter.spec:1140
ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl:26
}
Stack Begin
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src', Line 285
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src', Line 2045
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.expect.src', Line 320 - function handleError
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.expect.src', Line 333 - function throwingMatcher
Script 'ReplicatedStorage.TS.shared.xstate-core.interpreter.spec', Line 1140
Script 'ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl', Line 26
Stack End
Event "TRIGGER" was sent to stopped actor "x:43 (x:43)". This actor has already reached its final state, and will not transition.
Event: {"type":"TRIGGER"}
{["__stack"] = ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src:2043
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError:27
ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl:26
, ["message"] = Code should not be running when globalEnv is uninitialised, ["name"] = Error, ["stack"] = Error: Code should not be running when globalEnv is uninitialised
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src:2043
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError:27
ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl:26
}
Stack Begin
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src', Line 2043
Script 'ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError', Line 27
Script 'ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl', Line 26
Stack End
 FAIL   xstate-core  xstate-core/interpreter.spec 6.053 s
  ● interpreter › should throw an error if initial state sent to interpreter is invalid

    expect(received).toEqual(expected) -- deep equality

      Expected: "[Error: Initial state node " not found on parent state node #fetchMachine]"
      Received: {"__stack": "ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.formatInitialTransition:10 function formatInitialTransition
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateNode:359
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.memo:16 function memo
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateNode:358 function getInitial
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.getInitialStateNodes:14 function iter
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.getInitialStateNodes:21 function getInitialStateNodes
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.getInitialStateNodesWithTheirAncestors:6 function getInitialStateNodesWithTheirAncestors
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.getAllStateNodes:26 function getAllStateNodes
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.getStateValue:7 function getStateValue
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.State:86 function createMachineSnapshot
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:212 function getPreInitialState
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:233 function getInitialSnapshot
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:245
      ReplicatedStorage.TS.include.RuntimeLib:195 function try
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:234 function _initState
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:224 function constructor
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:67 function new
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:696 function createActor
      ReplicatedStorage.TS.shared.xstate-core.interpreter.spec:681
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299
      ", "message": "Initial state node " not found on parent state node #fetchMachine", "name": "Error", "stack": "Error: Initial state node " not found on parent state node #fetchMachine
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.formatInitialTransition:10 function formatInitialTransition
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateNode:359
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.memo:16 function memo
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateNode:358 function getInitial
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.getInitialStateNodes:14 function iter
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.getInitialStateNodes:21 function getInitialStateNodes
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.getInitialStateNodesWithTheirAncestors:6 function getInitialStateNodesWithTheirAncestors
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.getAllStateNodes:26 function getAllStateNodes
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.getStateValue:7 function getStateValue
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.State:86 function createMachineSnapshot
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:212 function getPreInitialState
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:233 function getInitialSnapshot
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:245
      ReplicatedStorage.TS.include.RuntimeLib:195 function try
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:234 function _initState
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:224 function constructor
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:67 function new
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:696 function createActor
      ReplicatedStorage.TS.shared.xstate-core.interpreter.spec:681
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299
      "}
      ReplicatedStorage.TS.shared.xstate-core.interpreter.spec:683
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● interpreter › should not update when stopped

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 1
    + Received  + 1
    
      Table {
        Table {

            "Event " was sent to stopped actor \"x:27 (x:27)\". This actor has already reached its final state, and will not transition.
      -       Event: {\"type\":\"TIMER\"}",
      + Event: {\"type\":\"TIMER\"}",
          },
        }
      ReplicatedStorage.TS.shared.xstate-core.interpreter.spec:702
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● interpreter › .start() › should initialize the service

    expect(jest.fn()).toHaveBeenCalled()

      Expected number of calls: >= 1
      Received number of calls:    0
      ReplicatedStorage.TS.shared.xstate-core.interpreter.spec:1009
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● interpreter › .start() › should not reinitialize a started service

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

      Expected number of calls: 1
      Received number of calls: 0
      ReplicatedStorage.TS.shared.xstate-core.interpreter.spec:1024
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● interpreter › .stop() › should not execute transitions after being stopped

    Exceeded timeout of 5000 ms for a test.

      Use jest.setTimeout(newTimeout) to increase the timeout value, if this is a long-running test.

  ● should notify the error observer for an errored logic when it gets subscribed after it errors

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  -  1
    + Received  + 29
    
      Table {
        Table {
          Table {

      -       "Error: error",
      +       "__stack": "ReplicatedStorage.TS.shared.xstate-core.interpreter.spec:1831 function entry
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:187
      + ReplicatedStorage.TS.include.RuntimeLib:195 function try
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:185
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:271
      + ReplicatedStorage.TS.include.RuntimeLib:195 function try
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:270 function update
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:480 function start
      + ReplicatedStorage.TS.shared.xstate-core.interpreter.spec:1838
      + ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299
      + ",
      +       "message": "error",
      +       "name": "Error",
      +       "stack": "Error: error
      + ReplicatedStorage.TS.shared.xstate-core.interpreter.spec:1831 function entry
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:187
      + ReplicatedStorage.TS.include.RuntimeLib:195 function try
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:185
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:271
      + ReplicatedStorage.TS.include.RuntimeLib:195 function try
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:270 function update
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:480 function start
      + ReplicatedStorage.TS.shared.xstate-core.interpreter.spec:1838
      + ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299
      + ",
            },
          },
        }
      ReplicatedStorage.TS.shared.xstate-core.interpreter.spec:1842
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

 PASS   xstate-core  xstate-core/invalid.spec 
{["__stack"] = ReplicatedStorage.TS.shared.xstate-core.invoke.spec:3173
ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl:26
, ["matcherResult"] = {["actual"] = {{["actorId"] = 0.(machine).second.fetch, ["type"] = xstate.done.actor.0.(machine).second.fetch}, {["actorId"] = 0.(machine).first.fetch, ["type"] = xstate.done.actor.0.(machine).first.fetch}}, ["expected"] = {{["actorId"] = 0.(machine).first.fetch, ["type"] = xstate.done.actor.0.(machine).first.fetch}, {["actorId"] = 0.(machine).second.fetch, ["type"] = xstate.done.actor.0.(machine).second.fetch}}, ["message"] = expect(received).toEqual(expected) -- deep equality

- Expected  - 4
+ Received  + 4

  Table {
    Table {
-     "actorId": "0.(machine).first.fetch",
-     "type": "xstate.done.actor.0.(machine).first.fetch",
-   },
-   Table {
      "actorId": "0.(machine).second.fetch",
      "type": "xstate.done.actor.0.(machine).second.fetch",
+   },
+   Table {
+     "actorId": "0.(machine).first.fetch",
+     "type": "xstate.done.actor.0.(machine).first.fetch",
    },
  }, ["name"] = toEqual, ["pass"] = false}, ["message"] = expect(received).toEqual(expected) -- deep equality

- Expected  - 4
+ Received  + 4

  Table {
    Table {
-     "actorId": "0.(machine).first.fetch",
-     "type": "xstate.done.actor.0.(machine).first.fetch",
-   },
-   Table {
      "actorId": "0.(machine).second.fetch",
      "type": "xstate.done.actor.0.(machine).second.fetch",
+   },
+   Table {
+     "actorId": "0.(machine).first.fetch",
+     "type": "xstate.done.actor.0.(machine).first.fetch",
    },
  }, ["name"] = Error, ["stack"] = Error: expect(received).toEqual(expected) -- deep equality

- Expected  - 4
+ Received  + 4

  Table {
    Table {
-     "actorId": "0.(machine).first.fetch",
-     "type": "xstate.done.actor.0.(machine).first.fetch",
-   },
-   Table {
      "actorId": "0.(machine).second.fetch",
      "type": "xstate.done.actor.0.(machine).second.fetch",
+   },
+   Table {
+     "actorId": "0.(machine).first.fetch",
+     "type": "xstate.done.actor.0.(machine).first.fetch",
    },
  }
ReplicatedStorage.TS.shared.xstate-core.invoke.spec:3173
ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl:26
... }
Stack Begin
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-mock.src', Line 285
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src', Line 2045
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.expect.src', Line 320 - function handleError
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.expect.src', Line 333 - function throwingMatcher
Script 'ReplicatedStorage.TS.shared.xstate-core.invoke.spec', Line 3173
Script 'ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl', Line 26
Stack End
 FAIL   xstate-core  xstate-core/invoke.spec 7.019 s
  ● invoke › invoke config defined as src containing a machine directly should register unique and predictable child in state

    stack overflow

      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.instance-of.src.instanceof:8

  ● invoke › xstate.done.actor events should have unique names when invokee is a machine with an id property

    Exceeded timeout of 5000 ms for a test.

      Use jest.setTimeout(newTimeout) to increase the timeout value, if this is a long-running test.

 PASS   xstate-core  xstate-core/json.spec 
{["__stack"] = ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src:2043
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError:27
ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl:26
, ["message"] = Code should not be running when globalEnv is uninitialised, ["name"] = Error, ["stack"] = Error: Code should not be running when globalEnv is uninitialised
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src:2043
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError:27
ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl:26
}
Stack Begin
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src', Line 2043
Script 'ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError', Line 27
Script 'ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl', Line 26
Stack End
{["__stack"] = ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src:2043
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError:27
ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl:26
, ["message"] = Code should not be running when globalEnv is uninitialised, ["name"] = Error, ["stack"] = Error: Code should not be running when globalEnv is uninitialised
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src:2043
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError:27
ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl:26
}
Stack Begin
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src', Line 2043
Script 'ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError', Line 27
Script 'ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl', Line 26
Stack End
 FAIL   xstate-core  xstate-core/logger.spec 
  ● logger › system logger should be default logger for actors (spawned from machine)

    expect.assertions(1)
    
    Expected one assertion to be called but received zero assertion calls.

      ReplicatedStorage.TS.shared.xstate-core.logger.spec:30
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

 FAIL   xstate-core  xstate-core/machine.spec 
  ● machine › machine.states › should properly register machine states

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 1
    + Received  + 1
    
      Table {
    -   "green",
        "yellow",
    +   "green",
        "red",
      }

      ReplicatedStorage.TS.shared.xstate-core.machine.spec:65
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● machine › machine.events › should return the set of events accepted by machine

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 1
    + Received  + 1
    
      Table {
    -   "TIMER",
        "POWER_OUTAGE",
    +   "TIMER",
        "PED_COUNTDOWN",
      }

      ReplicatedStorage.TS.shared.xstate-core.machine.spec:70
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● StateNode › should list transitions

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 2
    + Received  + 1
    
      Table {
    -   "TIMER",
        "POWER_OUTAGE",
    -   "FORBIDDEN_EVENT",
    +   "TIMER",
      }

      ReplicatedStorage.TS.shared.xstate-core.machine.spec:426
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

 PASS   xstate-core  xstate-core/match.spec 
 PASS   xstate-core  xstate-core/meta.spec 
 PASS   xstate-core  xstate-core/microstep.spec 
 PASS   xstate-core  xstate-core/multiple.spec 
{{order, 0}, {one, 1}, {three, 2}, {four, 3}, {five, 4}, {six, 5}, {two, 6}, {seven, 7}, {eight, 8}, {ten, 9}, {eleven, 10}, {twelve, 11}, {nine, 12}, {thirteen, 13}, {fourteen, 14}, {fifteen, 15}}
 FAIL   xstate-core  xstate-core/order.spec 
  ● document order › should specify the correct document order for each state node

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 9
    + Received  + 9
    
    @@ -6,27 +6,27 @@
        Table {
          "one",
          1,
        },
        Table {
    -     "two",
    +     "three",
          2,
        },
        Table {
    -     "three",
    +     "four",
          3,
        },
        Table {
    -     "four",
    +     "five",
          4,
        },
        Table {
    -     "five",
    +     "six",
          5,
        },
        Table {
    -     "six",
    +     "two",
          6,
        },
        Table {
          "seven",
          7,
    @@ -34,23 +34,23 @@
        Table {
          "eight",
          8,
        },
        Table {
    -     "nine",
    +     "ten",
          9,
        },
        Table {
    -     "ten",
    +     "eleven",
          10,
        },
        Table {
    -     "eleven",
    +     "twelve",
          11,
        },
        Table {
    -     "twelve",
    +     "nine",
          12,
        },
        Table {
          "thirteen",
          13,

      ReplicatedStorage.TS.shared.xstate-core.order.spec:90
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

 FAIL   xstate-core  xstate-core/parallel.spec 
  ● parallel states › should go from {"bold":"off","underline":"on","italics":"off","list":"bullets"} to {"bold":"on","underline":"on","italics":"on","list":"bullets"} on TOGGLE_BOLD, TOGGLE_ITALICS

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 2
    + Received  + 2
    
      Table {

      -   "bold": "on",
      -   "italics": "on",
      +   "bold": "off",
      +   "italics": "off",
          "list": "bullets",
          "underline": "on",
        }
      ReplicatedStorage.TS.shared.xstate-core.parallel.spec:549
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

 PASS   xstate-core  xstate-core/predictableExec.spec 
 FAIL   xstate-core  xstate-core/rehydration.spec 
  ● rehydration › should be able to stop a rehydrated child

    expect(received).toBe(expected) -- Object.is equality

      Expected: "c"
      Received: "b"
      ReplicatedStorage.TS.shared.xstate-core.rehydration.spec:217
      ReplicatedStorage.TS.include.RuntimeLib:148

 PASS   xstate-core  xstate-core/resolve.spec 
 PASS   xstate-core  xstate-core/setup.types.spec 
 PASS   xstate-core  xstate-core/spawn.spec 
 PASS   xstate-core  xstate-core/spawn.types.spec 
 PASS   xstate-core  xstate-core/spawnChild.spec 
 PASS   xstate-core  xstate-core/state.spec 
 PASS   xstate-core  xstate-core/stateIn.spec 
{["__stack"] = ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src:2043
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError:27
ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl:26
, ["message"] = Code should not be running when globalEnv is uninitialised, ["name"] = Error, ["stack"] = Error: Code should not be running when globalEnv is uninitialised
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src:2043
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError:27
ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl:26
}
Stack Begin
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src', Line 2043
Script 'ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError', Line 27
Script 'ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl', Line 26
Stack End
 FAIL   xstate-core  xstate-core/system.spec 
  ● system › should throw an error if an actor with the system ID already exists

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  -  1
    + Received  + 57
    
      Table {
        Table {
          Table {

      -       "Error: Actor with system ID 'test' already exists.",
      +       "__stack": "ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createSystem:137
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:209 function constructor
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:67 function new
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:696 function createActor
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.actions.spawnChild:27 function resolveSpawn
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveAndExecuteActionsWithContext:46 function resolveAndExecuteActionsWithContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveActionsAndContext:6 function resolveActionsAndContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.enterStates:71 function enterStates
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.microstep:35 function microstep
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.macrostep:70 function macrostep
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:201 function transition
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:491
      + ReplicatedStorage.TS.include.RuntimeLib:195 function try
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:490 function _process
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:53 function flush
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:45 function enqueue
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:623 function _send
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createSystem:163
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:634 function send
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.shared.xstate-core.system.spec:210
      + ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299
      + ",
      +       "message": "Actor with system ID 'test' already exists.",
      +       "name": "Error",
      +       "stack": "Error: Actor with system ID 'test' already exists.
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createSystem:137
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:209 function constructor
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:67 function new
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:696 function createActor
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.actions.spawnChild:27 function resolveSpawn
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveAndExecuteActionsWithContext:46 function resolveAndExecuteActionsWithContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveActionsAndContext:6 function resolveActionsAndContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.enterStates:71 function enterStates
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.microstep:35 function microstep
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.macrostep:70 function macrostep
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:201 function transition
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:491
      + ReplicatedStorage.TS.include.RuntimeLib:195 function try
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:490 function _process
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:53 function flush
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:45 function enqueue
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:623 function _send
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createSystem:163
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:634 function send
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.shared.xstate-core.system.spec:210
      + ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299
      + ",
            },
          },
        }
      ReplicatedStorage.TS.shared.xstate-core.system.spec:213
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

 PASS   xstate-core  xstate-core/tags.spec 
{["__stack"] = ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src:2043
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError:27
ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl:26
, ["message"] = Code should not be running when globalEnv is uninitialised, ["name"] = Error, ["stack"] = Error: Code should not be running when globalEnv is uninitialised
ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src:2043
ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError:27
ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl:26
}
Stack Begin
Script 'ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-runtime.src', Line 2043
Script 'ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.reportUnhandledError', Line 27
Script 'ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl', Line 26
Stack End
 PASS   xstate-core  xstate-core/toPromise.spec 
 PASS   xstate-core  xstate-core/transient.spec 
 PASS   xstate-core  xstate-core/transition.spec 
 PASS   xstate-core  xstate-core/typeHelpers.spec 
 PASS   xstate-core  xstate-core/types.spec 
 FAIL   xstate-core  xstate-core/waitFor.spec 
  ● waitFor › should throw an error when reaching a final state that does not match the predicate

    expect(received).rejects.toEqual(expected) -- deep equality

      Expected: "[Error: Actor terminated without satisfying predicate]"
      Received: {"__stack": "ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.waitFor:112 function complete
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:546
      ReplicatedStorage.TS.include.RuntimeLib:195 function try
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:543 function _complete
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:324 function update
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:515 function _process
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:53 function flush
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:45 function enqueue
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:623 function _send
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createSystem:163
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:634 function send
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      ReplicatedStorage.TS.shared.xstate-core.waitFor.spec:115
      ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl:26
      ", "message": "Actor terminated without satisfying predicate", "name": "Error", "stack": "Error: Actor terminated without satisfying predicate
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.waitFor:112 function complete
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:546
      ReplicatedStorage.TS.include.RuntimeLib:195 function try
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:543 function _complete
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:324 function update
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:515 function _process
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:53 function flush
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:45 function enqueue
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:623 function _send
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createSystem:163
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:634 function send
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      ReplicatedStorage.TS.shared.xstate-core.waitFor.spec:115
      ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl:26
      "}
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.expect.src:227
      ReplicatedStorage.TS.include.Promise:172 function runExecutor
      ReplicatedStorage.TS.include.Promise:181

  ● waitFor › should immediately reject for an actor in its final state that does not match the predicate

    expect(received).rejects.toEqual(expected) -- deep equality

      Expected: "[Error: Actor terminated without satisfying predicate]"
      Received: {"__stack": "ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.waitFor:112 function complete
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:354
      ReplicatedStorage.TS.include.RuntimeLib:195 function try
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:351 function subscribe
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.waitFor:104
      ReplicatedStorage.TS.include.Promise:172 function runExecutor
      ReplicatedStorage.TS.include.Promise:299
      ", "message": "Actor terminated without satisfying predicate", "name": "Error", "stack": "Error: Actor terminated without satisfying predicate
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.waitFor:112 function complete
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:354
      ReplicatedStorage.TS.include.RuntimeLib:195 function try
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:351 function subscribe
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.waitFor:104
      ReplicatedStorage.TS.include.Promise:172 function runExecutor
      ReplicatedStorage.TS.include.Promise:299
      "}
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.expect.src:227
      ReplicatedStorage.TS.include.Promise:172 function runExecutor
      ReplicatedStorage.TS.include.Promise:181
      ReplicatedStorage.TS.include.Promise:1257
      ReplicatedStorage.TS.include.Promise:172 function runExecutor
      ReplicatedStorage.TS.include.Promise:299

Summary of all failing tests
 FAIL  xstate-core/actions.spec 
  ● entry/exit actions › parallel states › should reenter parallel region when a parallel state gets reentered while targeting another region

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 2
    + Received  + 2
    
      Table {

      +   "exit: ready.devicesInfo",
          "exit: ready.camera.on",
          "exit: ready.camera",
      -   "exit: ready.devicesInfo",
          "exit: ready",
          "enter: ready",
      -   "enter: ready.devicesInfo",
          "enter: ready.camera",
          "enter: ready.camera.off",
      +   "enter: ready.devicesInfo",
        }
      ReplicatedStorage.TS.shared.xstate-core.actions.spec:1159
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● entry/exit actions › parallel states › should reenter parallel region when a parallel state is reentered while targeting another region

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 2
    + Received  + 2
    
      Table {

      +   "exit: ready.devicesInfo",
          "exit: ready.camera.on",
          "exit: ready.camera",
      -   "exit: ready.devicesInfo",
          "exit: ready",
          "enter: ready",
      -   "enter: ready.devicesInfo",
          "enter: ready.camera",
          "enter: ready.camera.off",
      +   "enter: ready.devicesInfo",
        }
      ReplicatedStorage.TS.shared.xstate-core.actions.spec:1194
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● forwardTo() › should not cause an infinite loop when forwarding to undefined

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  -  1
    + Received  + 49
    
      Table {
        Table {
          Table {

      -       "Error: Attempted to forward event to undefined actor. This risks an infinite loop in the sender.",
      +       "__stack": "ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.actions.send:161
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.actions.send:29 function resolveSendTo
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveAndExecuteActionsWithContext:46 function resolveAndExecuteActionsWithContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveActionsAndContext:6 function resolveActionsAndContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.microstep:31 function microstep
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.macrostep:70 function macrostep
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:201 function transition
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:491
      + ReplicatedStorage.TS.include.RuntimeLib:195 function try
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:490 function _process
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:53 function flush
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:45 function enqueue
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:623 function _send
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createSystem:163
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:634 function send
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.shared.xstate-core.actions.spec:2309
      + ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299
      + ",
      +       "message": "Attempted to forward event to undefined actor. This risks an infinite loop in the sender.",
      +       "name": "Error",
      +       "stack": "Error: Attempted to forward event to undefined actor. This risks an infinite loop in the sender.
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.actions.send:161
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.actions.send:29 function resolveSendTo
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveAndExecuteActionsWithContext:46 function resolveAndExecuteActionsWithContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveActionsAndContext:6 function resolveActionsAndContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.microstep:31 function microstep
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.macrostep:70 function macrostep
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:201 function transition
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:491
      + ReplicatedStorage.TS.include.RuntimeLib:195 function try
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:490 function _process
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:53 function flush
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:45 function enqueue
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:623 function _send
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createSystem:163
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:634 function send
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.shared.xstate-core.actions.spec:2309
      + ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299
      + ",
            },
          },
        }
      ReplicatedStorage.TS.shared.xstate-core.actions.spec:2312
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● sendTo › should error if given a string

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  -  1
    + Received  + 39
    
      Table {
        Table {
          Table {

      -       "Error: Only event objects may be used with sendTo; use sendTo({ type: \"a string\" }) instead",
      +       "__stack": "ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.actions.send:19 function resolveSendTo
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveAndExecuteActionsWithContext:46 function resolveAndExecuteActionsWithContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveActionsAndContext:6 function resolveActionsAndContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.enterStates:71 function enterStates
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.microstep:35 function microstep
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:248 function getInitialSnapshot
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:245
      + ReplicatedStorage.TS.include.RuntimeLib:195 function try
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:234 function _initState
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:224 function constructor
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:67 function new
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:696 function createActor
      + ReplicatedStorage.TS.shared.xstate-core.actions.spec:2871
      + ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299
      + ",
      +       "message": "Only event objects may be used with sendTo; use sendTo({ type: \"a string\" }) instead",
      +       "name": "Error",
      +       "stack": "Error: Only event objects may be used with sendTo; use sendTo({ type: \"a string\" }) instead
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.actions.send:19 function resolveSendTo
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveAndExecuteActionsWithContext:46 function resolveAndExecuteActionsWithContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveActionsAndContext:6 function resolveActionsAndContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.enterStates:71 function enterStates
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.microstep:35 function microstep
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:248 function getInitialSnapshot
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:245
      + ReplicatedStorage.TS.include.RuntimeLib:195 function try
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:234 function _initState
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:224 function constructor
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:67 function new
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:696 function createActor
      + ReplicatedStorage.TS.shared.xstate-core.actions.spec:2871
      + ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299
      + ",
            },
          },
        }
      ReplicatedStorage.TS.shared.xstate-core.actions.spec:2876
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● sendTo › should not attempt to deliver a delayed event to the spawned actor's ID that was stopped since the event was scheduled

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 2
    + Received  + 2
    
      Table {
        Table {

      -     ""PING\" was sent to stopped actor \"myChild (x:113)\". This actor has already reached its final state, and will not transition.
      - Event: {\"type\":\"PING\"}\",",
      +     "Event " was sent to stopped actor \"myChild (x:113)\". This actor has already reached its final state, and will not transition.
      + Event: {\"type\":\"PING\"}",
          },
        }
      ReplicatedStorage.TS.shared.xstate-core.actions.spec:2974
      ReplicatedStorage.TS.include.RuntimeLib:148

  ● sendTo › should not attempt to deliver a delayed event to the invoked actor's ID that was stopped since the event was scheduled

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 2
    + Received  + 2
    
      Table {
        Table {

      -     ""PING\" was sent to stopped actor \"myChild (x:116)\". This actor has already reached its final state, and will not transition.
      - Event: {\"type\":\"PING\"}\"",
      +     "Event " was sent to stopped actor \"myChild (x:116)\". This actor has already reached its final state, and will not transition.
      + Event: {\"type\":\"PING\"}",
          },
        }
      ReplicatedStorage.TS.shared.xstate-core.actions.spec:3039
      ReplicatedStorage.TS.include.RuntimeLib:148

  ● raise › should error if given a string

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  -  1
    + Received  + 39
    
      Table {
        Table {
          Table {

      -       "Error: Only event objects may be used with raise; use raise({ type: \"a string\" }) instead",
      +       "__stack": "ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.actions.raise:14 function resolveRaise
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveAndExecuteActionsWithContext:46 function resolveAndExecuteActionsWithContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveActionsAndContext:6 function resolveActionsAndContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.enterStates:71 function enterStates
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.microstep:35 function microstep
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:248 function getInitialSnapshot
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:245
      + ReplicatedStorage.TS.include.RuntimeLib:195 function try
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:234 function _initState
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:224 function constructor
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:67 function new
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:696 function createActor
      + ReplicatedStorage.TS.shared.xstate-core.actions.spec:3213
      + ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299
      + ",
      +       "message": "Only event objects may be used with raise; use raise({ type: \"a string\" }) instead",
      +       "name": "Error",
      +       "stack": "Error: Only event objects may be used with raise; use raise({ type: \"a string\" }) instead
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.actions.raise:14 function resolveRaise
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveAndExecuteActionsWithContext:46 function resolveAndExecuteActionsWithContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveActionsAndContext:6 function resolveActionsAndContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.enterStates:71 function enterStates
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.microstep:35 function microstep
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:248 function getInitialSnapshot
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:245
      + ReplicatedStorage.TS.include.RuntimeLib:195 function try
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:234 function _initState
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:224 function constructor
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:67 function new
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:696 function createActor
      + ReplicatedStorage.TS.shared.xstate-core.actions.spec:3213
      + ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299
      + ",
            },
          },
        }
      ReplicatedStorage.TS.shared.xstate-core.actions.spec:3218
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● actions › should call transition actions in document order for same-level parallel regions

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 1
    + Received  + 1
    
      Table {
    -   "a",
        "b",
    +   "a",
      }

      ReplicatedStorage.TS.shared.xstate-core.actions.spec:3730
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● actions › should call transition actions in document order for states at different levels of parallel regions

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 1
    + Received  + 1
    
      Table {
    -   "a1",
        "b",
    +   "a1",
      }

      ReplicatedStorage.TS.shared.xstate-core.actions.spec:3768
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● actions › should warn if called in custom action

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 14
    + Received  +  1
    
    - Table {
    -   Table {

      -     "Custom actions should not call `assign()` directly, as it is not imperative. See https://stately.ai/docs/actions#built-in-actions for more details.",
      -   },
      -   Table {
      -     "Custom actions should not call `raise()` directly, as it is not imperative. See https://stately.ai/docs/actions#built-in-actions for more details.",
      -   },
      -   Table {
      -     "Custom actions should not call `sendTo()` directly, as it is not imperative. See https://stately.ai/docs/actions#built-in-actions for more details.",
      -   },
      -   Table {
      -     "Custom actions should not call `emit()` directly, as it is not imperative. See https://stately.ai/docs/actions#built-in-actions for more details.",
      -   },
      - }
      + Table {}
      ReplicatedStorage.TS.shared.xstate-core.actions.spec:4004
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299


 FAIL  xstate-core/examples/6.16.spec 
  ● Example 6.16 › should go from {"A":"D","B":"F"} to {"A":"C","B":"F"} on 1, 5, 3

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 1
    + Received  + 1
    
      Table {

      -   "A": "C",
      +   "A": "D",
          "B": "F",
        }
      ReplicatedStorage.TS.shared.xstate-core.utils:66
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299


 FAIL  xstate-core/examples/6.17.spec 
  ● Example 6.17 › should go from X to {"Y":{"A":"C","B":"G"}} on 2, back, 4

    expect(received).toEqual(expected) -- deep equality

      Expected: {"Y": {"A": "C", "B": "G"}}
      Received: "X"
      ReplicatedStorage.TS.shared.xstate-core.examples.6.17.spec:91
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299


 FAIL  xstate-core/examples/6.9.spec 
  ● Example 6.9 › should go from {"A":"C"} to {"A":{"B":"E"}} on 4, 6, 1

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 1
    + Received  + 1
    
      Table {

          "A": Table {
      -     "B": "E",
      +     "C": "G",
          },
        }
      ReplicatedStorage.TS.shared.xstate-core.utils:66
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● Example 6.9 › should go from {"A":"B"} to {"A":{"C":"G"}} on 5, 6, 1

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 1
    + Received  + 1
    
      Table {

          "A": Table {
      -     "C": "G",
      +     "B": "E",
          },
        }
      ReplicatedStorage.TS.shared.xstate-core.utils:66
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299


 FAIL  xstate-core/id.spec 
  ● State node IDs › should go from {"B":"foo"} to {"A":"foo"} on NEXT,NEXT

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 1
    + Received  + 1
    
      Table {

      -   "A": "foo",
      +   "B": "foo",
        }
      ReplicatedStorage.TS.shared.xstate-core.utils:66
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● State node IDs › should work with keys that have escaped periods

    Invalid transition definition for state node '(machine).start':

      Error: Child state 'foo..bar' does not exist on '(machine)'
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveTarget:37
      ReplicatedStorage.TS.include.RuntimeLib:209 function try
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveTarget:33
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveTarget:47 function resolveTarget
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.formatTransition:15 function formatTransition
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.formatTransitions:19
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.formatTransitions:22 function formatTransitions
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateNode:121 function _initialize
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateNode:139
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateNode:142 function _initialize
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:106 function constructor
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:42 function new
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createMachine:49 function createMachine
      ReplicatedStorage.TS.shared.xstate-core.id.spec:127
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● State node IDs › should work with IDs that have escaped periods

    Child state node '#foo..bar' does not exist on machine '(machine)'

      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:272 function getStateNodeById
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveTarget:23
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveTarget:47 function resolveTarget
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.formatTransition:15 function formatTransition
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.formatTransitions:19
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.formatTransitions:22 function formatTransitions
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateNode:121 function _initialize
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateNode:139
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateNode:142 function _initialize
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:106 function constructor
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:42 function new
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createMachine:49 function createMachine
      ReplicatedStorage.TS.shared.xstate-core.id.spec:158
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● State node IDs › should not treat escaped backslash as period's escape

    Child state node '#some\\' does not exist on machine '(machine)'

      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:272 function getStateNodeById
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveTarget:23
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveTarget:47 function resolveTarget
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.formatTransition:15 function formatTransition
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.formatTransitions:19
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.formatTransitions:22 function formatTransitions
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateNode:121 function _initialize
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateNode:139
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateNode:142 function _initialize
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:106 function constructor
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:42 function new
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createMachine:49 function createMachine
      ReplicatedStorage.TS.shared.xstate-core.id.spec:192
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299


 FAIL  xstate-core/inspect.spec 
  ● inspect › can inspect communications between actors

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 50
    + Received  + 50
    
    @@ -70,50 +70,28 @@

            "sourceId": "x:2",
            "targetId": "x:3",
            "type": "@xstate.event",
          },
          Table {
      -     "actorId": "x:3",
            "event": Table {
      -       "type": "xstate.init",
      +       "data": 42,
      +       "type": "xstate.promise.resolve",
            },
      -     "snapshot": Table {
      -       "status": "active",
      -     },
      -     "status": "active",
      -     "type": "@xstate.snapshot",
      +     "sourceId": "x:3",
      +     "targetId": "x:3",
      +     "type": "@xstate.event",
          },
          Table {
      -     "actorId": "x:2",
      +     "actorId": "x:3",
            "event": Table {
      -       "type": "loadChild",
      +       "type": "xstate.init",
            },
            "snapshot": Table {
      -       "value": "loading",
      -     },
              "status": "active",
      -     "type": "@xstate.snapshot",
      -   },
      -   Table {
      -     "actorId": "x:1",
      -     "event": Table {
      -       "type": "load",
      -     },
      -     "snapshot": Table {
      -       "value": "waiting",
            },
            "status": "active",
            "type": "@xstate.snapshot",
      -   },
      -   Table {
      -     "event": Table {
      -       "data": 42,
      -       "type": "xstate.promise.resolve",
      -     },
      -     "sourceId": "x:3",
      -     "targetId": "x:3",
      -     "type": "@xstate.event",
          },
          Table {
            "event": Table {
              "actorId": "0.(machine).loading",
              "output": 42,
      @@ -122,48 +100,49 @@
            "sourceId": "x:3",
            "targetId": "x:2",
            "type": "@xstate.event",
          },
          Table {
      +     "actorId": "x:3",
            "event": Table {
      -       "type": "toParent",
      +       "data": 42,
      +       "type": "xstate.promise.resolve",
      +     },
      +     "snapshot": Table {
      +       "output": 42,
      +       "status": "done",
            },
      -     "sourceId": "x:2",
      -     "targetId": "x:1",
      -     "type": "@xstate.event",
      +     "status": "done",
      +     "type": "@xstate.snapshot",
          },
          Table {
      -     "actorId": "x:1",
      +     "actorId": "x:2",
            "event": Table {
      -       "type": "toParent",
      +       "type": "loadChild",
            },
            "snapshot": Table {
      -       "value": "waiting",
      +       "value": "loading",
            },
            "status": "active",
            "type": "@xstate.snapshot",
          },
          Table {
            "event": Table {
      -       "actorId": "child",
      -       "type": "xstate.done.actor.child",
      +       "type": "toParent",
            },
            "sourceId": "x:2",
            "targetId": "x:1",
            "type": "@xstate.event",
          },
          Table {
      -     "actorId": "x:1",
            "event": Table {
              "actorId": "child",
              "type": "xstate.done.actor.child",
            },
      -     "snapshot": Table {
      -       "value": "success",
      -     },
      -     "status": "active",
      -     "type": "@xstate.snapshot",
      +     "sourceId": "x:2",
      +     "targetId": "x:1",
      +     "type": "@xstate.event",
          },
          Table {
            "actorId": "x:2",
            "event": Table {
              "actorId": "0.(machine).loading",
      @@ -175,18 +154,39 @@
            },
            "status": "done",
            "type": "@xstate.snapshot",
          },
          Table {
      -     "actorId": "x:3",
      +     "actorId": "x:1",
      +     "event": Table {
      +       "type": "load",
      +     },
      +     "snapshot": Table {
      +       "value": "waiting",
      +     },
      +     "status": "active",
      +     "type": "@xstate.snapshot",
      +   },
      +   Table {
      +     "actorId": "x:1",
            "event": Table {
      -       "data": 42,
      -       "type": "xstate.promise.resolve",
      +       "type": "toParent",
            },
            "snapshot": Table {
      -       "output": 42,
      -       "status": "done",
      +       "value": "waiting",
            },
      -     "status": "done",
      +     "status": "active",
      +     "type": "@xstate.snapshot",
      +   },
      +   Table {
      +     "actorId": "x:1",
      +     "event": Table {
      +       "actorId": "child",
      +       "type": "xstate.done.actor.child",
      +     },
      +     "snapshot": Table {
      +       "value": "success",
      +     },
      +     "status": "active",
            "type": "@xstate.snapshot",
          },
        }
      ReplicatedStorage.TS.shared.xstate-core.inspect.spec:287
      ReplicatedStorage.TS.include.RuntimeLib:148


 FAIL  xstate-core/interpreter.spec 6.053 s
  ● interpreter › should throw an error if initial state sent to interpreter is invalid

    expect(received).toEqual(expected) -- deep equality

      Expected: "[Error: Initial state node " not found on parent state node #fetchMachine]"
      Received: {"__stack": "ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.formatInitialTransition:10 function formatInitialTransition
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateNode:359
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.memo:16 function memo
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateNode:358 function getInitial
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.getInitialStateNodes:14 function iter
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.getInitialStateNodes:21 function getInitialStateNodes
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.getInitialStateNodesWithTheirAncestors:6 function getInitialStateNodesWithTheirAncestors
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.getAllStateNodes:26 function getAllStateNodes
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.getStateValue:7 function getStateValue
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.State:86 function createMachineSnapshot
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:212 function getPreInitialState
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:233 function getInitialSnapshot
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:245
      ReplicatedStorage.TS.include.RuntimeLib:195 function try
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:234 function _initState
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:224 function constructor
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:67 function new
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:696 function createActor
      ReplicatedStorage.TS.shared.xstate-core.interpreter.spec:681
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299
      ", "message": "Initial state node " not found on parent state node #fetchMachine", "name": "Error", "stack": "Error: Initial state node " not found on parent state node #fetchMachine
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.formatInitialTransition:10 function formatInitialTransition
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateNode:359
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.memo:16 function memo
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateNode:358 function getInitial
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.getInitialStateNodes:14 function iter
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.getInitialStateNodes:21 function getInitialStateNodes
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.getInitialStateNodesWithTheirAncestors:6 function getInitialStateNodesWithTheirAncestors
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.getAllStateNodes:26 function getAllStateNodes
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.getStateValue:7 function getStateValue
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.State:86 function createMachineSnapshot
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:212 function getPreInitialState
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:233 function getInitialSnapshot
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:245
      ReplicatedStorage.TS.include.RuntimeLib:195 function try
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:234 function _initState
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:224 function constructor
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:67 function new
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:696 function createActor
      ReplicatedStorage.TS.shared.xstate-core.interpreter.spec:681
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299
      "}
      ReplicatedStorage.TS.shared.xstate-core.interpreter.spec:683
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● interpreter › should not update when stopped

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 1
    + Received  + 1
    
      Table {
        Table {

            "Event " was sent to stopped actor \"x:27 (x:27)\". This actor has already reached its final state, and will not transition.
      -       Event: {\"type\":\"TIMER\"}",
      + Event: {\"type\":\"TIMER\"}",
          },
        }
      ReplicatedStorage.TS.shared.xstate-core.interpreter.spec:702
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● interpreter › .start() › should initialize the service

    expect(jest.fn()).toHaveBeenCalled()

      Expected number of calls: >= 1
      Received number of calls:    0
      ReplicatedStorage.TS.shared.xstate-core.interpreter.spec:1009
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● interpreter › .start() › should not reinitialize a started service

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

      Expected number of calls: 1
      Received number of calls: 0
      ReplicatedStorage.TS.shared.xstate-core.interpreter.spec:1024
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● interpreter › .stop() › should not execute transitions after being stopped

    Exceeded timeout of 5000 ms for a test.

      Use jest.setTimeout(newTimeout) to increase the timeout value, if this is a long-running test.

  ● should notify the error observer for an errored logic when it gets subscribed after it errors

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  -  1
    + Received  + 29
    
      Table {
        Table {
          Table {

      -       "Error: error",
      +       "__stack": "ReplicatedStorage.TS.shared.xstate-core.interpreter.spec:1831 function entry
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:187
      + ReplicatedStorage.TS.include.RuntimeLib:195 function try
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:185
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:271
      + ReplicatedStorage.TS.include.RuntimeLib:195 function try
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:270 function update
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:480 function start
      + ReplicatedStorage.TS.shared.xstate-core.interpreter.spec:1838
      + ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299
      + ",
      +       "message": "error",
      +       "name": "Error",
      +       "stack": "Error: error
      + ReplicatedStorage.TS.shared.xstate-core.interpreter.spec:1831 function entry
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:187
      + ReplicatedStorage.TS.include.RuntimeLib:195 function try
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:185
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:271
      + ReplicatedStorage.TS.include.RuntimeLib:195 function try
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:270 function update
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:480 function start
      + ReplicatedStorage.TS.shared.xstate-core.interpreter.spec:1838
      + ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299
      + ",
            },
          },
        }
      ReplicatedStorage.TS.shared.xstate-core.interpreter.spec:1842
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299


 FAIL  xstate-core/invoke.spec 7.019 s
  ● invoke › invoke config defined as src containing a machine directly should register unique and predictable child in state

    stack overflow

      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.instance-of.src.instanceof:8

  ● invoke › xstate.done.actor events should have unique names when invokee is a machine with an id property

    Exceeded timeout of 5000 ms for a test.

      Use jest.setTimeout(newTimeout) to increase the timeout value, if this is a long-running test.


 FAIL  xstate-core/logger.spec 
  ● logger › system logger should be default logger for actors (spawned from machine)

    expect.assertions(1)
    
    Expected one assertion to be called but received zero assertion calls.

      ReplicatedStorage.TS.shared.xstate-core.logger.spec:30
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299


 FAIL  xstate-core/machine.spec 
  ● machine › machine.states › should properly register machine states

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 1
    + Received  + 1
    
      Table {
    -   "green",
        "yellow",
    +   "green",
        "red",
      }

      ReplicatedStorage.TS.shared.xstate-core.machine.spec:65
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● machine › machine.events › should return the set of events accepted by machine

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 1
    + Received  + 1
    
      Table {
    -   "TIMER",
        "POWER_OUTAGE",
    +   "TIMER",
        "PED_COUNTDOWN",
      }

      ReplicatedStorage.TS.shared.xstate-core.machine.spec:70
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299

  ● StateNode › should list transitions

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 2
    + Received  + 1
    
      Table {
    -   "TIMER",
        "POWER_OUTAGE",
    -   "FORBIDDEN_EVENT",
    +   "TIMER",
      }

      ReplicatedStorage.TS.shared.xstate-core.machine.spec:426
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299


 FAIL  xstate-core/order.spec 
  ● document order › should specify the correct document order for each state node

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 9
    + Received  + 9
    
    @@ -6,27 +6,27 @@
        Table {
          "one",
          1,
        },
        Table {
    -     "two",
    +     "three",
          2,
        },
        Table {
    -     "three",
    +     "four",
          3,
        },
        Table {
    -     "four",
    +     "five",
          4,
        },
        Table {
    -     "five",
    +     "six",
          5,
        },
        Table {
    -     "six",
    +     "two",
          6,
        },
        Table {
          "seven",
          7,
    @@ -34,23 +34,23 @@
        Table {
          "eight",
          8,
        },
        Table {
    -     "nine",
    +     "ten",
          9,
        },
        Table {
    -     "ten",
    +     "eleven",
          10,
        },
        Table {
    -     "eleven",
    +     "twelve",
          11,
        },
        Table {
    -     "twelve",
    +     "nine",
          12,
        },
        Table {
          "thirteen",
          13,

      ReplicatedStorage.TS.shared.xstate-core.order.spec:90
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299


 FAIL  xstate-core/parallel.spec 
  ● parallel states › should go from {"bold":"off","underline":"on","italics":"off","list":"bullets"} to {"bold":"on","underline":"on","italics":"on","list":"bullets"} on TOGGLE_BOLD, TOGGLE_ITALICS

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  - 2
    + Received  + 2
    
      Table {

      -   "bold": "on",
      -   "italics": "on",
      +   "bold": "off",
      +   "italics": "off",
          "list": "bullets",
          "underline": "on",
        }
      ReplicatedStorage.TS.shared.xstate-core.parallel.spec:549
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299


 FAIL  xstate-core/rehydration.spec 
  ● rehydration › should be able to stop a rehydrated child

    expect(received).toBe(expected) -- Object.is equality

      Expected: "c"
      Received: "b"
      ReplicatedStorage.TS.shared.xstate-core.rehydration.spec:217
      ReplicatedStorage.TS.include.RuntimeLib:148


 FAIL  xstate-core/system.spec 
  ● system › should throw an error if an actor with the system ID already exists

    expect(received).toEqual(expected) -- deep equality
    
    - Expected  -  1
    + Received  + 57
    
      Table {
        Table {
          Table {

      -       "Error: Actor with system ID 'test' already exists.",
      +       "__stack": "ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createSystem:137
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:209 function constructor
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:67 function new
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:696 function createActor
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.actions.spawnChild:27 function resolveSpawn
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveAndExecuteActionsWithContext:46 function resolveAndExecuteActionsWithContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveActionsAndContext:6 function resolveActionsAndContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.enterStates:71 function enterStates
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.microstep:35 function microstep
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.macrostep:70 function macrostep
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:201 function transition
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:491
      + ReplicatedStorage.TS.include.RuntimeLib:195 function try
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:490 function _process
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:53 function flush
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:45 function enqueue
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:623 function _send
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createSystem:163
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:634 function send
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.shared.xstate-core.system.spec:210
      + ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299
      + ",
      +       "message": "Actor with system ID 'test' already exists.",
      +       "name": "Error",
      +       "stack": "Error: Actor with system ID 'test' already exists.
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createSystem:137
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:209 function constructor
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:67 function new
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:696 function createActor
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.actions.spawnChild:27 function resolveSpawn
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveAndExecuteActionsWithContext:46 function resolveAndExecuteActionsWithContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.resolveActionsAndContext:6 function resolveActionsAndContext
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.enterStates:71 function enterStates
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.microstep:35 function microstep
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.state.macrostep:70 function macrostep
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.StateMachine:201 function transition
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:491
      + ReplicatedStorage.TS.include.RuntimeLib:195 function try
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:490 function _process
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:53 function flush
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:45 function enqueue
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:623 function _send
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createSystem:163
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:634 function send
      + ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      + ReplicatedStorage.TS.shared.xstate-core.system.spec:210
      + ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      + ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299
      + ",
            },
          },
        }
      ReplicatedStorage.TS.shared.xstate-core.system.spec:213
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.jest-circus.src.circus.utils:367
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:172 function runExecutor
      ReplicatedStorage.TS.node_modules.@rbxts.ReactLua.node_modules.@jsdotlua.promise.lib:299


 FAIL  xstate-core/waitFor.spec 
  ● waitFor › should throw an error when reaching a final state that does not match the predicate

    expect(received).rejects.toEqual(expected) -- deep equality

      Expected: "[Error: Actor terminated without satisfying predicate]"
      Received: {"__stack": "ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.waitFor:112 function complete
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:546
      ReplicatedStorage.TS.include.RuntimeLib:195 function try
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:543 function _complete
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:324 function update
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:515 function _process
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:53 function flush
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:45 function enqueue
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:623 function _send
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createSystem:163
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:634 function send
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      ReplicatedStorage.TS.shared.xstate-core.waitFor.spec:115
      ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl:26
      ", "message": "Actor terminated without satisfying predicate", "name": "Error", "stack": "Error: Actor terminated without satisfying predicate
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.waitFor:112 function complete
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:546
      ReplicatedStorage.TS.include.RuntimeLib:195 function try
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:543 function _complete
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:324 function update
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:515 function _process
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:53 function flush
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.Mailbox:45 function enqueue
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:623 function _send
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createSystem:163
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:634 function send
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.polyfill.bind:17
      ReplicatedStorage.TS.shared.xstate-core.waitFor.spec:115
      ReplicatedStorage.TS.node_modules.@rbxts.luau-polyfill.out.Timers.makeTimerImpl:26
      "}
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.expect.src:227
      ReplicatedStorage.TS.include.Promise:172 function runExecutor
      ReplicatedStorage.TS.include.Promise:181

  ● waitFor › should immediately reject for an actor in its final state that does not match the predicate

    expect(received).rejects.toEqual(expected) -- deep equality

      Expected: "[Error: Actor terminated without satisfying predicate]"
      Received: {"__stack": "ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.waitFor:112 function complete
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:354
      ReplicatedStorage.TS.include.RuntimeLib:195 function try
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:351 function subscribe
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.waitFor:104
      ReplicatedStorage.TS.include.Promise:172 function runExecutor
      ReplicatedStorage.TS.include.Promise:299
      ", "message": "Actor terminated without satisfying predicate", "name": "Error", "stack": "Error: Actor terminated without satisfying predicate
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.waitFor:112 function complete
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:354
      ReplicatedStorage.TS.include.RuntimeLib:195 function try
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.createActor:351 function subscribe
      ReplicatedStorage.TS.node_modules.@rbxts.xstate-core.utils.misc.waitFor:104
      ReplicatedStorage.TS.include.Promise:172 function runExecutor
      ReplicatedStorage.TS.include.Promise:299
      "}
      ReplicatedStorage.TS.node_modules.@rbxts.JestLua.node_modules.@jsdotlua.expect.src:227
      ReplicatedStorage.TS.include.Promise:172 function runExecutor
      ReplicatedStorage.TS.include.Promise:181
      ReplicatedStorage.TS.include.Promise:1257
      ReplicatedStorage.TS.include.Promise:172 function runExecutor
      ReplicatedStorage.TS.include.Promise:299



Test Suites: 15 failed, 44 passed, 59 total
Tests:       37 failed, 43 skipped, 1 todo, 1273 passed, 1354 total
Snapshots:   0 total
Time:        22.354 s
Ran all test suites.
user_run_in_roblox-50312.rbxmx.run-in-roblox-plugin.Main:25: Tests failed!
user_run_in_roblox-50312.rbxmx.run-in-roblox-plugin.Main:25
user_run_in_roblox-50312.rbxmx.run-in-roblox-plugin:79

Stack Begin
Script 'user_run_in_roblox-50312.rbxmx.run-in-roblox-plugin', Line 84
Stack End
 ELIFECYCLE  Test failed. See above for more details.
